<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML APIs | Web Worker API</title>
</head>
<body>

    <h1>Web Work API</h1>
    <p>Count numbers without freezing the page</p>

    <button onclick="startWorker()">Start Worker</button>
    <button onclick="stopWorker()">Stop Worker</button>

    <p>Worker Count: <span id="result">0</span></p>

    <p>
        Main Thread:
        <input type="text" placeholder="Type Here the page won't freeze">
    </p>

<script>

let worker;

function startWorker() {

    if (typeof(worker) == "undefined") {

        const workerCode = `
            let count = 0;

            setInterval(function() {
                count++;
                postMessage(count);
            }, 100);
        `;

        const blob = new Blob([workerCode], { type: "application/javascript" });
        worker = new Worker(URL.createObjectURL(blob));

        worker.onmessage = function(event) {
            document.getElementById("result").textContent = event.data;
        };
    }
}

function stopWorker() {
    if (worker) {
        worker.terminate();
        worker = undefined;
    }
}

</script>

</body>
</html>
